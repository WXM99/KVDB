# 简单数据库的开发文档

​								   516015910018 魏小渺

## 0. Catalog:

> 1. 项目概况……...…...……...…...……...…...……...…...xx
>
> 2. 用户接口……...…...……...…...……...…...……...…...xx
>
> 3. 代码模块……...…...……...…...……...…...……...…...xx
>
> 4. 基本功能……...…...……...…...……...…...……...…...xx
>
> 5. 附加结构……...…...……...…...……...…...……...…...xx
>
>    5.1 Cache类的实现……...…...……...…...……...…...xx
>
>    5.2 Buffer类的实现……...…...……...…...……...…....xx
>
>    5.3 VacancyHolder的实现……...…...……...…...……xx
>
> 6. 功能特性.................……...…...……...…...……...…...xx
>
>    6.1 不定长数据 ……...…...……...….....…...……...….xx
>
>    6.2 时间性能优化……...…...……...….....…...…….....xx
>
>    6.3 空间性能优化……...…...……...….....…...…….....xx
>
> 7. 测试程序设计……...……...…...……...….....…...…….xx
>
>    7.1 用于正确性的测试程序……...…...……...…...…...xx
>
>    7.2 用于时间性能分析的测试程序……...…...…….....xx
>
>    7.3 用于空间性能分析的测试程序……...…...…….....xx
>
>    7.4 用于附加结构功能的测试程序……...…...…….....xx
>
> 8. 测试结果分析……...……...…...……...…...……...…...xx
>
>    8.1 大量数据的正确性测试……...…...……...…...…...xx
>
>    8.2 复杂操作的正确性测试……...…...……...…...…...xx
>
>    8.3 均匀访问下，时间性能与访问数量的关系..……..xx
>
>    8.4 热点访问下，时间性能与访问数量的关系..……..xx
>
>    8.5 时间性能与访问单个数据大小的关系……...….....xx
>
>    8.6 空间利用率与访问数量的关系……...…...………..xx
>
>    8.7 附加结构对性能的影响……...…...……...………..xx
>
> 9. 优化方向…...……………...…...……...….....…...…….xx
>
> 10. 参考……..……...…..……...…...……...….....…...…….xx



## 1.  项目概况

###     项目名称

​	简易数据库

###     引索结构

​	B+ Tree

###     功能摘要     

​       利用B+树这一核心数据结构实现了一个简易的<key-value>类型数据库。实现了对数据库内插入数据，删除数据，修改数据和读取数据的一些基本功能。另外还设计了Cache，Buffer，VacancyHolder这些用于性能优化的附加结构。

###     开发环境

​	Xcode Version 9.3.1

###     测试环境

- 机型：MacBook pro 
- 处理器：2.7 GHz Intel Core i5 
- 内存： 8 GB 1867 MHz DDR3 
- 系统： macOS High Sierra vision 10.13.5;



## 2. 用户接口

​       按照数据库所储存的数据类型······ 另外，为了便于测试附加结构对性能的影响，还针对各个结构编写了对应的API。

###     2.1 创建/打开数据文件

###     2.2 插入数据

###     2.3 删除数据

###     2.4 修改数据

###     2.5 读取数据

###     2.6 保存/关闭数据库

###     2.7 附加结构的接口：

####         2.7.1 Buffer

##### 		2.7.1.3 开启/关闭

##### 		2.7.1.1 手动释放

##### 		2.7.1.2 容量设置

  ####         2.7.2 Cache

##### 		2.7.1.3 开启/关闭

##### 		2.7.1.1 手动写入

##### 		2.7.1.2 容量设置

#### 	2.7.3 VacancyHolder

##### 		2.7.1.3 开启/关闭

##### 		2.7.1.2 容量设置



## 3. 代码模块

### 3.1 db_interface.cpp 

### 3.2 b_plus_tree.cpp 

### 3.3 bpt_node.cpp 

### 3.4 data_file.cpp 

### 3.5 buffer.cpp 

### 3.6 cache.cpp 

### 3.7 v_holder.cpp 

### 3.8 各个模块组织关系



## 4. 基本功能

### 4.1 打开/关闭数据库

### 4.1 插入数据

### 4.2 删除数据

### 4.3 修改数据

### 4.4 查找数据



## 5. 附加结构

### 5.1 Cache

### 5.2 Buffer

### 5.3 VacancyHolder



## 6. 功能特性

### 6.1 不定长数据

### 6.2 时间性能优化

### 6.3 空间性能优化



## 7. 测试程序设计

### 7.1 用于正确性的测试程序

### 7.2 用于时间性能分析的测试程序

### 7.3 用于空间性能分析的测试程序

### 7.4 用于附加结构功能的测试程序



## 8. 测试结果分析

### 8.1 大量数据的正确性测试

### 8.2 复杂操作的正确性测试

### 8.3 均匀访问下，时间性能与访问数量的关系

### 8.4 热点访问下，时间性能与访问数量的关系

### 8.5 时间性能与访问单个数据大小的关系

### 8.6 空间利用率与访问数量的关系

### 8.7 附加结构对性能的影响



## 9. 优化方向



## 10. 参考









